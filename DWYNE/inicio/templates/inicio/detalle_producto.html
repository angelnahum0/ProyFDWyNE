{% extends 'inicio/base.html' %}
{% block title %}
<title>{{producto.titulo}}</title>
{% endblock %}
{% block content %}
<div>
        <h1>{{ producto.titulo }}</h1>
        <p>{{ producto.descripcion }}</p>
        <p>Precio: ${{ producto.precio }}</p>
        <p>Cantidad:{{ producto.stock}}</p>
        {% if producto.imagen %}
            <img src="{{ producto.imagen.url }}" alt="{{ producto.titulo }}" width="50%">
        {% endif %}
        {% if producto.video %}
            <video controls>
                <source src="{{ producto.video.url }}" type="video/mp4">
                Tu navegador no soporta el elemento de video.
            </video>
        {% endif %}
        {% if producto.stock == 0 %}
            <p>Producto agotado</p>
        {% else %}
            <p>Quedan {{ producto.stock }} unidades</p>
            <form action="{% url 'add_to_cart' producto.id %}" method="post">
                {% csrf_token %}
                <input type="number" name="cantidad" value="1" min="1" max="{{ producto.stock }}">
                <button type="submit">Agregar al carrito</button>
            </form>
        {% endif %}
        <a href="{% url 'index' %}">Volver a la lista de productos</a>
        {% if datos %}
        <h2>Comparador de precios</h2>
        <table>
            <thead>
                <tr>
                    <th>TÃ­tulo</th>
                    <th>Precio</th>
                </tr>
            </thead>
            <tbody>
        {% for dato in datos %}
                    <tr>
                        <td>{{ dato.title }}</td>
                        <td>{{ dato.price }}</td>
                    </tr>
        {% endfor %}
        {% endif %}
</div>
{% endblock %}